# sRPC
A simple implementation of a (gRPC-inspired) RPC framework.

## Example Code:  
  
### Define the contract file
```proto
message Number {
    int32 num;
}

service Calculator {
    method square(Number) returns (Number);
}
```
Then, call srpc to generate the stub codes.
### Server
```cpp
/// Inherit the default servicer and implement the methods defined
/// in the contract file (Calculator_servicer is generated by srpc.)
struct Calculator : public Calculator_servicer { 
    Number square(Number& req) override {
        Number res;
        res.num = req.num * req.num; // implementation of 'square'-ing a Number 
        return res;
    }
};
```

```cpp
#include <srpc/server.hpp>
/* Also include the generated file */
...

server s;
Calculator MyCalculator;

s.register_service(MyCalculator);
s.start("8080"); // defaults to localhost
```

### Client
```cpp
/* Include the generated file */

Calculator stub(); // instantiate the service
stub.register_insecure_channel("127.0.0.1", "8080");

Number two;
input.num = 2;

Number four = stub.square(two);
assert(four.num == 4);
```
